<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session 20: ES6</title>
</head>
<style>
    legend {
        background-color: yellow;
        border: 1px solid black;
        color: black;
        padding: 10px;
    }

    fieldset {
        padding: 20px;
    }

    td {
        white-space: nowrap;
    }

    table,
    tr,
    td {
        border: 1px solid black;
        border-collapse: collapse;
    }
</style>

<body>
    <fieldset>
        <legend>Spread</legend>
        <h3>Copy nội dung các phần tử trong mảng Array hoặc Object</h3>
        <button onclick="getSpread()">Click</button>
    </fieldset>
    <br>
    <fieldset>
        <legend>Rest</legend>
        <h3>Lấy phần còn lại trong mảng Array hoặc Object</h3>
        <button onclick="getRest()">Click</button>
    </fieldset>
    <br>
    <fieldset>
        <legend>Destructuring</legend>
        <h3>Lấy 1 phần tử trong mảng hoặc Key trong object</h3>
        <button onclick="getDestructuring()">Click</button>
    </fieldset>
    <br>
    <fieldset>
        <legend>Ví dụ Spread</legend>
        <h3>Chó mèo</h3>
        <button onclick="vi_du_spread()">Click</button>
    </fieldset>
    <br>
    <fieldset>
        <legend>Class</legend>
        <h3>Ví dụ về Class</h3>
        <button onclick="getClass()">Click</button>
    </fieldset>
    <script>
        // Tham số mặc định
        function sum(a, b = 0) {
            // Khi b không được truyền vào khi gọi hàm hoặc b bằng undefined
            return a + b;
        }
        const sumNumber = sum(1);

        function renderData(data = []) {
            data.forEach((element) => {
                console.log("Element", element)
            })
        }
        renderData();


        function getSpread() {
            const number = [1, 4, 5, 7];
            // Spread --> Copy lại mảng hoặc Object
            number2 = [...number] // bọc lại Array hoặc Object tương ứng
            number2[1] = 1000;
            console.log("Check Number 2: ", number);
            console.log("Check Number 2: ", number2);
        }


        function getRest() {
            // Rest --> Lấy phần còn lại (Hữu ích khi dùng function)
            function sumData(a, b, ...other) { // other đặt tên tùy thích 
                // arguments
                console.log("Kiểm tra a:", a);
                console.log("Kiểm tra b:", b);
                console.log("Kiểm tra other:", other); // Lấy ra tất cả các phần tử còn lại ngoại trừ phần tử a,b mà không phải gọi từng biến
            }

            sumData(1, 3, 5, 6, 7, 321321, 12, 213, 3213, 321);

            function sumNumbers(...data) {
                let sum = 0;
                for (let i = 0; i < data.length; i++) {
                    const number = data[i];
                    // Cộng từng phần tử vào Sum
                    sum += number;
                }
                return sum;
            }
            const sum_1 = sumNumbers(1, 2);
            const sum_2 = sumNumbers(1, 3, 4, 6, 7);

            console.log("Kết quả sum 1: ", sum_1);
            console.log("Kết quả sum 2: ", sum_2);


            // Sự kết hợp giữa Rest và Destructuring
            function getStudent({ id, name, ...other }) {
                console.log(id, name, other);
            }
            const student = { id: 1, name: "Trần Văn A", age: 18, address: "Đà Nẵng", gender: true };
            const student_2 = { id: 2, name: "Trần Văn B", age: 20, address: "Đà Lạt", gender: true }

            getStudent(student);
            getStudent(student_2);
        }

        // get Destructuring
        function getDestructuring() {
            const student = {
                id: 1,
                name: "Nguyễn Văn A",
                age: 18,
                address: "ĐN"
            }

            const nameStudent = student.name;
            const ageStudent = student.age;
            // Thay vì viết như trên có thể làm như sau
            const { address, id } = student;
            console.log("Student", nameStudent, ageStudent, address, id)

            const animal = ["dog", "cat", "pig"];
            const [a, b, c] = animal;
            console.log("Animal", a, b, c)

        }

        // Ví dụ về Spread
        function vi_du_spread() {
            const dogs = ["Kiki", "Lu", "Bon"];
            const cats = ["Chó", "Mimi", "Nana", "Oke", "Good"];
            const pets = [...dogs, ...cats] // Hoặc dogs.concat(cats)
            console.log("Các Pets:", pets)

            // Lấy hết 3 chó và bỏ 2 mèo đầu
            // Dùng Destructuring kết hợp với Rest
            const [a, b, ...otherCat] = cats
            console.log("Tổng Cat:", cats)
            console.log("Tổng Cat còn lại ngoại trừ 2 con đầu:", otherCat)
            console.log("Tổng Cat còn lại ngoại trừ 2 con đầu:", ...otherCat)
            const pets_2 = [...dogs, ...otherCat]
            console.log("Tổng 3 chó và bỏ 2 mèo đầu là: ", pets_2)
        }

        // Arrow Function -> Return 1 kết quả mà không thực thi khối lệnh trước đó
        const sumN = (a, b) => a + b;
        // Cấu trúc tương tự
        const sum_2 = (a, b) => {
            // Khối lệnh thực thi

            // return
            return a + b
        };

        // Khi trả về đối tượng và return rút gọn
        const convertData = (name, age) => ({ name: name, age: age });
        console.log(convertData, typeof convertData)

        // Cách 2:

        const convertData_2 = (name, age) => { return { name: name, age: age } };
        console.log(convertData_2, typeof convertData_2)


        // Cách 3:
        const convertData_3 = (name, age) => ({ name, age });
        console.log(convertData_3, typeof convertData_3)


        // Arrow Function không có this

        // Class
        function getClass() {
            class Person {
                constructor(name, age, gender, hobby) {
                    this.name = name;
                    this.age = age;
                    this.gender = gender;
                    this.hobby = hobby;
                }
            }

            class User extends Person {
                constructor(name, age, gender, hobby, email, password) {
                    super(name, age, gender, hobby);
                    this.email = email;
                    this.password = password;
                }
                getInfo = () => ({ name: this.name, age: this.age, gender: this.gender, hobby: this.hobby, });
                getAccount = () => ({ email: this.email, password: this.password })
            }

            const person = new Person("Nguyễn Văn A", 20, true, "Game");
            const user = new User("Nguyễn Văn B", 21, false, "Guitar", "b@gmail.com", "1234");

            console.log("Kiểm tra Person: ", person);
            console.log("Kiểm tra User: ", user);
        }


    </script>
</body>

</html>